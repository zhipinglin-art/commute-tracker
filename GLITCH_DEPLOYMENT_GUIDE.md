# Glitch 部署通勤记录应用详细指南

本文将手把手教您如何在 Glitch 平台上部署通勤记录应用，整个过程无需银行卡，完全免费。

## 为什么选择 Glitch？

- ✅ 完全免费，无需信用卡
- ✅ 支持 Python 和 FastAPI
- ✅ 自动检测和安装依赖
- ✅ 一键部署，无需复杂配置
- ✅ 提供永久免费的 `.glitch.me` 域名
- ✅ 自动 HTTPS，移动端友好
- ✅ 内置编辑器，可随时修改代码

## 步骤一：注册和登录

1. **访问 Glitch**
   - 打开浏览器，访问 [https://glitch.com](https://glitch.com)

2. **创建账户**
   - 点击右上角的 "Sign in" 按钮
   - 选择使用 GitHub 账号登录（推荐）
   - 授权 Glitch 访问您的 GitHub（这是安全的标准 OAuth 流程）

## 步骤二：导入项目

1. **开始新项目**
   - 登录后，点击页面中央的 "New Project" 按钮
   - 或者点击左上角的 "+" 按钮

2. **选择导入方式**
   - 在弹出的选项中，选择 "Import from GitHub"
   - 系统会打开一个导入界面

3. **输入仓库地址**
   - 在 "Enter the URL of a repo" 输入框中输入：
   ```
   https://github.com/zhipinglin-art/commute-tracker
   ```
   - 确保输入完整且准确

4. **选择项目名称**
   - 可以保持默认名称，或者输入一个更友好的名称
   - 例如：`commute-tracker` 或 `my-commute-app`

5. **开始导入**
   - 点击 "Import from GitHub" 按钮
   - 等待几分钟，Glitch 会自动下载并设置您的项目

## 步骤三：配置项目

1. **等待安装完成**
   - 导入后，Glitch 会自动检测项目类型并安装依赖
   - 您可以在左侧面板看到安装进度
   - 等待状态显示为 "Ready" 或看到终端显示成功信息

2. **检查配置文件**
   - 在左侧文件列表中，确认 `.glitch.json` 文件存在
   - 这个文件告诉 Glitch 如何运行您的应用

3. **启动应用**
   - 如果应用没有自动启动，点击顶部的 "Show" 按钮
   - 或者点击终端区域的 "Run" 按钮

## 步骤四：获取和测试 URL

1. **获取公网 URL**
   - 在项目窗口顶部，找到并点击 "Show" 按钮
   - 会在新标签页中打开您的应用
   - URL 格式通常为：`https://your-project-name.glitch.me`

2. **测试应用功能**
   - 测试基本功能是否正常：
     - 加载首页
     - 切换不同标签页（记录、历史、分析）
     - 尝试创建一条测试记录

3. **检查 API**
   - 可以在 URL 后添加 `/docs` 查看 API 文档
   - 例如：`https://your-project-name.glitch.me/docs`

## 步骤五：在 iPhone 上使用

### 方法一：直接访问

1. **打开 Safari**
   - 在 iPhone 上打开 Safari 浏览器
   - 输入完整的 Glitch 应用 URL

2. **使用应用**
   - 开始记录您的通勤数据
   - 测试所有功能是否正常

### 方法二：添加到主屏幕（推荐）

1. **在 Safari 中打开应用**
   - 输入完整的 Glitch 应用 URL
   - 等待应用完全加载

2. **打开分享菜单**
   - 点击底部的分享按钮（一个向上的箭头在方框中）
   - 从底部滑出的菜单中滑动选项

3. **添加到主屏幕**
   - 找到并点击 "添加到主屏幕" 选项
   - 可以自定义应用名称（保持默认即可）
   - 点击右上角的 "添加" 按钮

4. **使用桌面应用**
   - 应用图标现在出现在您的主屏幕上
   - 点击图标打开，体验接近原生应用

## 常见问题解决

### 问题1：应用加载缓慢或无法加载

**解决方案：**
1. 等待更长时间 - Glitch 可能需要几分钟来启动应用
2. 刷新页面
3. 检查项目是否正确导入 - 确保所有文件都存在

### 问题2：依赖安装失败

**解决方案：**
1. 在 Glitch 编辑器中打开 `requirements.txt` 文件
2. 检查是否有无效的依赖
3. 可以尝试在终端中手动运行：`pip install -r requirements.txt`

### 问题3：应用功能不完整

**解决方案：**
1. 检查浏览器控制台是否有错误信息
2. 确认所有 JavaScript 文件正确加载
3. 检查 API 端点是否正常响应

### 问题4：数据无法保存

**解决方案：**
1. 应用默认使用 SQLite 数据库
2. Glitch 上的 SQLite 文件会在应用重启后保持
3. 如果需要持久化存储，可以考虑添加外部数据库

## 高级配置

### 自定义域名

1. 在 Glitch 项目设置中找到 "Custom Domains"
2. 添加您的自定义域名
3. 按照指示配置 DNS 记录

### 添加环境变量

1. 在项目设置中找到 ".env" 文件
2. 添加需要的环境变量
3. 例如：`DB_HOST=your-host`, `DB_USER=your-username`

### 设置定期任务

1. 创建一个新文件，如 `keep-alive.js`
2. 添加代码防止应用休眠：
```javascript
setInterval(() => {
  fetch('https://your-app.glitch.me/api/weather');
}, 5 * 60 * 1000); // 每5分钟ping一次
```

## Glitch 免费版限制

了解这些限制可以帮助您更好地使用服务：

1. **休眠机制**：5分钟无活动会进入休眠状态
2. **启动时间**：再次访问需要几秒钟唤醒
3. **资源限制**：CPU 和内存使用有限制
4. **流量限制**：每月有一定的流量限制

对于个人通勤记录应用，这些限制通常不会影响使用。

## 维护和更新

### 更新应用

1. 在本地修改代码
2. 推送到 GitHub
3. 在 Glitch 中点击 "Tools" > "Git"
4. 选择 "Sync with GitHub"

### 监控应用

1. 在 Glitch 中查看日志
2. 检查错误报告
3. 监控资源使用情况

## 结论

通过 Glitch 部署通勤记录应用，您可以在几分钟内获得一个可以在任何设备上访问的 Web 应用，包括您的 iPhone。整个过程完全免费，无需银行卡，非常适合个人使用。

部署完成后，您就可以随时随地记录您的通勤数据，并通过数据分析优化您的通勤方式。