<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é€šå‹¤æ—¶é—´è®°å½•</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/static/manifest.json">
    
    <!-- iOSç‰¹å®šmetaæ ‡ç­¾ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="é€šå‹¤è®°å½•">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'%3E%3Crect fill='%238B6F47' width='192' height='192' rx='48'/%3E%3Ctext x='96' y='130' font-size='100' text-anchor='middle' fill='white'%3EğŸš—%3C/text%3E%3C/svg%3E">
    
    <!-- ä¸»é¢˜é¢œè‰² -->
    <meta name="theme-color" content="#8B6F47">
    <meta name="msapplication-TileColor" content="#8B6F47">
    
    <!-- SEOå’Œæè¿° -->
    <meta name="description" content="è®°å½•å’Œåˆ†ææ¯æ—¥é€šå‹¤æ—¶é—´ï¼Œä¼˜åŒ–é€šå‹¤æ–¹æ¡ˆ">
    <meta name="keywords" content="é€šå‹¤,æ—¶é—´è®°å½•,æ•°æ®åˆ†æ,å‡ºè¡Œ">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ç¾æ‹‰å¾·è‰²ç³»é…è‰² */
        :root {
            --maillard-brown: #8B6F47;
            --maillard-caramel: #B8956A;
            --maillard-cream: #E8DCC4;
            --maillard-beige: #F5EFE6;
            --maillard-dark: #5C4A3A;
            --maillard-light: #D4C5B0;
            --maillard-accent: #A67C52;
        }
        
        body {
            background: linear-gradient(135deg, #F5EFE6 0%, #E8DCC4 100%);
            min-height: 100vh;
        }
        
        .tab-active {
            border-bottom: 3px solid var(--maillard-brown);
            color: var(--maillard-brown);
            background: var(--maillard-beige);
        }
        
        .tab-button {
            transition: all 0.3s ease;
        }
        
        .tab-button:hover {
            background: var(--maillard-cream);
        }
        
        .emoji-rating {
            display: inline-flex;
            gap: 0.5rem;
        }
        .emoji {
            cursor: pointer;
            font-size: 2rem;
            transition: all 0.3s;
            filter: grayscale(100%);
            opacity: 0.4;
        }
        .emoji.active {
            filter: grayscale(0%);
            opacity: 1;
            transform: scale(1.2);
        }
        .emoji:hover {
            filter: grayscale(0%);
            opacity: 1;
            transform: scale(1.15);
        }
        .time-button {
            transition: all 0.3s;
            background: var(--maillard-brown);
            box-shadow: 0 2px 4px rgba(92, 74, 58, 0.2);
        }
        .time-button:hover {
            background: var(--maillard-dark);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(92, 74, 58, 0.3);
        }
        .time-button.recorded {
            background: linear-gradient(135deg, #A67C52 0%, #8B6F47 100%);
            color: white;
        }
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 12px rgba(92, 74, 58, 0.2);
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(139, 111, 71, 0.3);
            border-radius: 50%;
            border-top-color: var(--maillard-brown);
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .card-maillard {
            background: white;
            border: 1px solid var(--maillard-light);
            box-shadow: 0 2px 8px rgba(139, 111, 71, 0.1);
            transition: all 0.3s ease;
        }
        
        .card-maillard:hover {
            box-shadow: 0 4px 16px rgba(139, 111, 71, 0.15);
            transform: translateY(-2px);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--maillard-brown) 0%, var(--maillard-accent) 100%);
            color: white;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, var(--maillard-dark) 0%, var(--maillard-brown) 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(92, 74, 58, 0.3);
        }
        
        .input-maillard {
            border: 2px solid var(--maillard-light);
            transition: all 0.3s ease;
        }
        
        .input-maillard:focus {
            border-color: var(--maillard-brown);
            box-shadow: 0 0 0 3px rgba(139, 111, 71, 0.1);
        }
        
        /* PWAç‰¹å®šæ ·å¼ */
        .pwa-mode {
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        /* iOSå®‰å…¨åŒºåŸŸé€‚é… */
        @supports (padding: max(0px)) {
            body {
                padding-left: max(0px, env(safe-area-inset-left));
                padding-right: max(0px, env(safe-area-inset-right));
            }
            
            .fixed {
                padding-left: max(0px, env(safe-area-inset-left));
                padding-right: max(0px, env(safe-area-inset-right));
            }
        }
        
        /* è§¦æ‘¸ä¼˜åŒ– */
        @media (hover: none) and (pointer: coarse) {
            .tab-button,
            .time-button,
            .btn-primary,
            button {
                min-height: 44px;
                min-width: 44px;
            }
            
            .emoji {
                font-size: 2.5rem;
                padding: 0.5rem;
            }
        }
        
        /* é˜²æ­¢iOSåŒå‡»ç¼©æ”¾ */
        * {
            touch-action: manipulation;
        }
        
        /* æ»šåŠ¨ä¼˜åŒ– */
        .overflow-y-auto {
            -webkit-overflow-scrolling: touch;
        }
        
        /* éšè—iOSé»˜è®¤çš„è¾“å…¥æ¡†é˜´å½± */
        input,
        textarea,
        select {
            -webkit-appearance: none;
            appearance: none;
        }
        
        /* ç”¨æˆ·ç¼–è¾‘å¼¹çª—æ ·å¼ */
        #userEditModal .emoji-option {
            transition: all 0.2s ease;
        }
        
        #userEditModal .emoji-option:hover {
            transform: scale(1.25);
        }
        
        #userEditModal input[type="radio"]:checked + div {
            color: var(--maillard-brown);
        }
        
        #userEditModal label:has(input[type="radio"]:checked) {
            border-color: var(--maillard-brown);
            background: var(--maillard-beige);
        }
        
        #previewAvatar {
            transition: all 0.3s ease;
        }
        
        #previewAvatar:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="bg-white shadow-lg" style="border-bottom: 3px solid var(--maillard-light);">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <span class="text-3xl mr-3">ğŸš—</span>
                    <h1 class="text-xl font-bold" style="color: var(--maillard-dark);">é€šå‹¤æ—¶é—´è®°å½• â±ï¸</h1>
                </div>
                <div id="userInfo" class="flex items-center space-x-3 cursor-pointer hover:opacity-80 transition-opacity" title="ç‚¹å‡»ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯">
                    <div class="loading"></div>
                </div>
            </div>
        </div>
    </nav>

    <!-- ç”¨æˆ·ä¿¡æ¯ç¼–è¾‘å¼¹çª— -->
    <div id="userEditModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 max-w-md w-full mx-4 shadow-2xl">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold" style="color: var(--maillard-dark);">âœï¸ ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯</h3>
                <button id="btnCloseUserEdit" class="text-gray-400 hover:text-gray-600 text-2xl">
                    Ã—
                </button>
            </div>
            
            <div class="space-y-4">
                <!-- å¤´åƒé¢„è§ˆ -->
                <div class="flex justify-center mb-4">
                    <div class="relative">
                        <img id="previewAvatar" src="" alt="å¤´åƒé¢„è§ˆ" class="w-24 h-24 rounded-full border-4 border-gray-200">
                        <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-lg">
                            <span class="text-2xl">âœï¸</span>
                        </div>
                    </div>
                </div>
                
                <!-- å§“åè¾“å…¥ -->
                <div>
                    <label class="block text-sm font-medium mb-2" style="color: var(--maillard-dark);">
                        ğŸ‘¤ æ˜¾ç¤ºå§“å
                    </label>
                    <input type="text" id="editUserName" 
                        class="w-full px-4 py-2 border-2 rounded-lg input-maillard focus:outline-none"
                        placeholder="è¯·è¾“å…¥æ˜¾ç¤ºå§“å">
                </div>
                
                <!-- å¤´åƒé€‰æ‹©æ–¹å¼ -->
                <div>
                    <label class="block text-sm font-medium mb-2" style="color: var(--maillard-dark);">
                        ğŸ–¼ï¸ å¤´åƒè®¾ç½®
                    </label>
                    <div class="space-y-3">
                        <!-- ä½¿ç”¨ç³»ç»Ÿå¤´åƒ -->
                        <label class="flex items-center p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
                            <input type="radio" name="avatarType" value="system" checked class="mr-3">
                            <div>
                                <div class="font-medium">ä½¿ç”¨ç³»ç»Ÿå¤´åƒ</div>
                                <div class="text-sm text-gray-500">ä½¿ç”¨ä¼ä¸šç³»ç»Ÿçš„é»˜è®¤å¤´åƒ</div>
                            </div>
                        </label>
                        
                        <!-- ä½¿ç”¨Emoji -->
                        <label class="flex items-center p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
                            <input type="radio" name="avatarType" value="emoji" class="mr-3">
                            <div class="flex-1">
                                <div class="font-medium">ä½¿ç”¨Emojiå¤´åƒ</div>
                                <div class="text-sm text-gray-500 mb-2">é€‰æ‹©ä¸€ä¸ªå–œæ¬¢çš„è¡¨æƒ…</div>
                                <div id="emojiPicker" class="grid grid-cols-6 gap-2 text-2xl">
                                    <span class="emoji-option cursor-pointer hover:scale-125 transition-transform" data-emoji="ğŸ˜€">ğŸ˜€</span>
                                    <span class="emoji-option cursor-pointer hover:scale-125 transition-transform" data-emoji="ğŸ˜Š">ğŸ˜Š</span>
                                    <span class="emoji-option cursor-pointer hover:scale-125 transition-transform" data-emoji="ğŸ˜">ğŸ˜</span>
                                    <span class="emoji-option cursor-pointer hover:scale-125 transition-transform" data-emoji="ğŸ¤“">ğŸ¤“</span>
                                    <span class="emoji-option cursor-pointer hover:scale-125 transition-transform" data-emoji="ğŸ˜º">ğŸ˜º</span>
                                    <span class="emoji-option cursor-pointer hover:scale-125 transition-transform" data-emoji="ğŸ¶">ğŸ¶</span>
                                    <span class="emoji-option cursor-pointer hover:scale-125 transition-transform" data-emoji="ğŸ±">ğŸ±</span>
                                    <span class="emoji-option cursor-pointer hover:scale-125 transition-transform" data-emoji="ğŸ¼">ğŸ¼</span>
                                    <span class="emoji-option cursor-pointer hover:scale-125 transition-transform" data-emoji="ğŸ¦Š">ğŸ¦Š</span>
                                    <span class="emoji-option cursor-pointer hover:scale-125 transition-transform" data-emoji="ğŸ»">ğŸ»</span>
                                    <span class="emoji-option cursor-pointer hover:scale-125 transition-transform" data-emoji="ğŸš—">ğŸš—</span>
                                    <span class="emoji-option cursor-pointer hover:scale-125 transition-transform" data-emoji="ğŸš‡">ğŸš‡</span>
                                </div>
                            </div>
                        </label>
                        
                        <!-- ä½¿ç”¨è‡ªå®šä¹‰URL -->
                        <label class="flex items-center p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
                            <input type="radio" name="avatarType" value="url" class="mr-3">
                            <div class="flex-1">
                                <div class="font-medium">è‡ªå®šä¹‰å›¾ç‰‡URL</div>
                                <input type="url" id="customAvatarUrl" 
                                    class="w-full mt-2 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="https://example.com/avatar.jpg"
                                    disabled>
                            </div>
                        </label>
                    </div>
                </div>
                
                <!-- æŒ‰é’®ç»„ -->
                <div class="flex justify-end space-x-3 mt-6 pt-4 border-t">
                    <button id="btnResetUserInfo" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors">
                        ğŸ”„ æ¢å¤é»˜è®¤
                    </button>
                    <button id="btnSaveUserInfo" class="px-6 py-2 btn-primary rounded-lg">
                        ğŸ’¾ ä¿å­˜
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tabå¯¼èˆª -->
    <div class="bg-white" style="border-bottom: 2px solid var(--maillard-cream);">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex space-x-8">
                <button id="tabRecord" class="tab-button py-4 px-2 font-medium tab-active rounded-t-lg">
                    âœï¸ è®°å½•é€šå‹¤
                </button>
                <button id="tabHistory" class="tab-button py-4 px-2 font-medium rounded-t-lg">
                    ğŸ“š å†å²è®°å½•
                </button>
                <button id="tabAnalysis" class="tab-button py-4 px-2 font-medium rounded-t-lg">
                    ğŸ“Š æ•°æ®åˆ†æ
                </button>
            </div>
        </div>
    </div>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- è®°å½•é¡µé¢ -->
        <div id="pageRecord" class="page-content">
            <div class="card-maillard rounded-xl p-6 max-w-2xl mx-auto">
                <h2 class="text-2xl font-bold mb-6 flex items-center" style="color: var(--maillard-dark);">
                    <span class="text-3xl mr-3">ğŸ“</span>
                    åˆ›å»ºé€šå‹¤è®°å½•
                </h2>
                
                <!-- åŸºæœ¬ä¿¡æ¯ -->
                <div class="space-y-4 mb-6">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2 flex items-center" style="color: var(--maillard-dark);">
                                ğŸ“… æ—¥æœŸ
                            </label>
                            <input type="date" id="recordDate" class="input-maillard w-full px-3 py-2 rounded-lg outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2 flex items-center" style="color: var(--maillard-dark);">
                                ğŸ“† æ˜ŸæœŸ
                            </label>
                            <input type="text" id="recordWeekday" readonly class="input-maillard w-full px-3 py-2 rounded-lg" style="background: var(--maillard-beige);">
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2 flex items-center" style="color: var(--maillard-dark);">
                                ğŸŒ¤ï¸ å¤©æ°”
                            </label>
                            <select id="recordWeather" class="input-maillard w-full px-3 py-2 rounded-lg outline-none">
                                <option value="">åŠ è½½ä¸­...</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2 flex items-center" style="color: var(--maillard-dark);">
                                ğŸŒ¡ï¸ æ¸©åº¦
                            </label>
                            <input type="text" id="recordTemperature" class="input-maillard w-full px-3 py-2 rounded-lg outline-none">
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2 flex items-center" style="color: var(--maillard-dark);">
                                ğŸšŒ å‡ºè¡Œæ–¹å¼
                            </label>
                            <select id="recordTransport" class="input-maillard w-full px-3 py-2 rounded-lg outline-none">
                                <option value="subway">ğŸš‡ åœ°é“</option>
                                <option value="car">ğŸš— å¼€è½¦</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2 flex items-center" style="color: var(--maillard-dark);">
                                ğŸ’¼ é€šå‹¤ç±»å‹
                            </label>
                            <select id="recordCommuteType" class="input-maillard w-full px-3 py-2 rounded-lg outline-none">
                                <option value="to_work">ğŸŒ… ä¸Šç­</option>
                                <option value="from_work">ğŸŒ† ä¸‹ç­</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- æ—¶é—´è®°å½• -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-4 flex items-center" style="color: var(--maillard-dark);">
                        <span class="text-2xl mr-2">â°</span>
                        æ—¶é—´è®°å½•
                    </h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-4 rounded-lg" style="background: var(--maillard-beige);">
                            <div>
                                <div class="font-medium flex items-center" style="color: var(--maillard-dark);">
                                    <span class="mr-2">ğŸšª</span>
                                    1. å‡ºé—¨
                                </div>
                                <div id="startTimeDisplay" class="text-sm" style="color: var(--maillard-accent);">æœªè®°å½•</div>
                            </div>
                            <button id="btnStartTime" class="time-button px-6 py-2 text-white rounded-lg">
                                â±ï¸ è®°å½•æ—¶é—´
                            </button>
                        </div>

                        <div class="flex items-center justify-between p-4 rounded-lg" style="background: var(--maillard-beige);">
                            <div>
                                <div class="font-medium flex items-center" style="color: var(--maillard-dark);">
                                    <span class="mr-2">ğŸšŒ</span>
                                    2. ä¸Šè½¦/ä¸Šåœ°é“
                                </div>
                                <div id="onVehicleTimeDisplay" class="text-sm" style="color: var(--maillard-accent);">æœªè®°å½•</div>
                            </div>
                            <button id="btnOnVehicleTime" class="time-button px-6 py-2 text-white rounded-lg opacity-50" disabled>
                                â±ï¸ è®°å½•æ—¶é—´
                            </button>
                        </div>

                        <div class="flex items-center justify-between p-4 rounded-lg" style="background: var(--maillard-beige);">
                            <div>
                                <div class="font-medium flex items-center" style="color: var(--maillard-dark);">
                                    <span class="mr-2">ğŸ¢</span>
                                    3. åˆ°è¾¾
                                </div>
                                <div id="arriveTimeDisplay" class="text-sm" style="color: var(--maillard-accent);">æœªè®°å½•</div>
                            </div>
                            <button id="btnArriveTime" class="time-button px-6 py-2 text-white rounded-lg opacity-50" disabled>
                                â±ï¸ è®°å½•æ—¶é—´
                            </button>
                        </div>
                    </div>

                    <div id="durationSummary" class="mt-4 p-4 rounded-lg hidden" style="background: var(--maillard-cream); border: 2px solid var(--maillard-light);">
                        <div class="text-sm space-y-1" style="color: var(--maillard-dark);">
                            <div class="flex items-center">
                                <span class="mr-2">ğŸš¶</span>
                                å‡ºé—¨åˆ°ä¸Šè½¦ï¼š<span id="duration1" class="font-semibold ml-2">-</span>
                            </div>
                            <div class="flex items-center">
                                <span class="mr-2">ğŸš—</span>
                                ä¸Šè½¦åˆ°åˆ°è¾¾ï¼š<span id="duration2" class="font-semibold ml-2">-</span>
                            </div>
                            <div class="text-lg font-bold mt-2 flex items-center" style="color: var(--maillard-brown);">
                                <span class="mr-2">â³</span>
                                æ€»æ—¶é•¿ï¼š<span id="totalDuration" class="ml-2">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- è¯„åˆ† -->
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2 flex items-center" style="color: var(--maillard-dark);">
                        <span class="text-xl mr-2">ğŸ’¯</span>
                        é€šå‹¤ä½“éªŒè¯„åˆ†
                    </label>
                    <div class="emoji-rating" id="emojiRating">
                        <span class="emoji" data-rating="1" title="å¾ˆå·®">ğŸ˜¢</span>
                        <span class="emoji" data-rating="2" title="ä¸å¥½">ğŸ˜•</span>
                        <span class="emoji" data-rating="3" title="ä¸€èˆ¬">ğŸ˜</span>
                        <span class="emoji" data-rating="4" title="ä¸é”™">ğŸ˜Š</span>
                        <span class="emoji" data-rating="5" title="å¾ˆå¥½">ğŸ˜„</span>
                    </div>
                </div>

                <!-- å¤‡æ³¨ -->
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2 flex items-center" style="color: var(--maillard-dark);">
                        <span class="text-xl mr-2">ğŸ“‹</span>
                        å¤‡æ³¨
                    </label>
                    <textarea id="recordNotes" rows="3" class="input-maillard w-full px-3 py-2 rounded-lg outline-none" placeholder="è®°å½•ä»Šå¤©é€šå‹¤çš„ç‰¹æ®Šæƒ…å†µ... ğŸ’­"></textarea>
                </div>

                <!-- æäº¤æŒ‰é’® -->
                <button id="btnSubmit" class="btn-primary w-full py-3 rounded-lg font-medium text-lg">
                    ğŸ’¾ ä¿å­˜è®°å½•
                </button>
            </div>
        </div>

        <!-- å†å²è®°å½•é¡µé¢ -->
        <div id="pageHistory" class="page-content hidden">
            <div class="card-maillard rounded-xl p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold flex items-center" style="color: var(--maillard-dark);">
                        <span class="text-3xl mr-3">ğŸ“š</span>
                        å†å²è®°å½•
                    </h2>
                    <button id="btnFilter" class="px-4 py-2 rounded-lg hover:shadow-md transition-all" style="background: var(--maillard-cream); color: var(--maillard-dark);">
                        ğŸ” ç­›é€‰
                    </button>
                </div>

                <!-- ç­›é€‰é¢æ¿ -->
                <div id="filterPanel" class="mb-6 p-4 rounded-lg hidden" style="background: var(--maillard-beige); border: 2px solid var(--maillard-light);">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: var(--maillard-dark);">ğŸ“… å¼€å§‹æ—¥æœŸ</label>
                            <input type="date" id="filterStartDate" class="input-maillard w-full px-3 py-2 rounded-lg outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: var(--maillard-dark);">ğŸ“… ç»“æŸæ—¥æœŸ</label>
                            <input type="date" id="filterEndDate" class="input-maillard w-full px-3 py-2 rounded-lg outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: var(--maillard-dark);">ğŸšŒ å‡ºè¡Œæ–¹å¼</label>
                            <select id="filterTransport" class="input-maillard w-full px-3 py-2 rounded-lg outline-none">
                                <option value="">å…¨éƒ¨</option>
                                <option value="subway">ğŸš‡ åœ°é“</option>
                                <option value="car">ğŸš— å¼€è½¦</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: var(--maillard-dark);">ğŸ’¼ é€šå‹¤ç±»å‹</label>
                            <select id="filterCommuteType" class="input-maillard w-full px-3 py-2 rounded-lg outline-none">
                                <option value="">å…¨éƒ¨</option>
                                <option value="to_work">ğŸŒ… ä¸Šç­</option>
                                <option value="from_work">ğŸŒ† ä¸‹ç­</option>
                            </select>
                        </div>
                    </div>
                    <div class="mt-4 flex justify-end space-x-2">
                        <button id="btnResetFilter" class="px-4 py-2 rounded-lg hover:shadow-md transition-all" style="background: var(--maillard-light); color: var(--maillard-dark);">ğŸ”„ é‡ç½®</button>
                        <button id="btnApplyFilter" class="btn-primary px-4 py-2 rounded-lg">âœ… åº”ç”¨</button>
                    </div>
                </div>

                <!-- è®°å½•åˆ—è¡¨ -->
                <div id="recordsList" class="space-y-4">
                    <div class="text-center py-8 text-gray-500">
                        <div class="loading mx-auto mb-2"></div>
                        <div>åŠ è½½ä¸­...</div>
                    </div>
                </div>

                <!-- åˆ†é¡µ -->
                <div id="pagination" class="mt-6 flex justify-center space-x-2 hidden">
                </div>
            </div>
        </div>

        <!-- æ•°æ®åˆ†æé¡µé¢ -->
        <div id="pageAnalysis" class="page-content hidden">
            <div class="space-y-6">
                <div class="card-maillard rounded-xl p-6">
                    <h2 class="text-2xl font-bold mb-6 flex items-center" style="color: var(--maillard-dark);">
                        <span class="text-3xl mr-3">ğŸ“Š</span>
                        æ•°æ®åˆ†æ
                    </h2>
                    
                    <!-- åŸºç¡€ç»Ÿè®¡å¡ç‰‡ -->
                    <div id="basicStats" class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="p-4 rounded-lg" style="background: linear-gradient(135deg, #E8DCC4 0%, #D4C5B0 100%);">
                            <div class="text-sm mb-1" style="color: var(--maillard-dark);">ğŸ“ˆ æ€»é€šå‹¤æ¬¡æ•°</div>
                            <div class="text-2xl font-bold" style="color: var(--maillard-brown);">-</div>
                        </div>
                        <div class="p-4 rounded-lg" style="background: linear-gradient(135deg, #D4C5B0 0%, #B8956A 100%);">
                            <div class="text-sm mb-1" style="color: var(--maillard-dark);">â±ï¸ å¹³å‡æ—¶é•¿</div>
                            <div class="text-2xl font-bold" style="color: var(--maillard-brown);">-</div>
                        </div>
                        <div class="p-4 rounded-lg" style="background: linear-gradient(135deg, #F5EFE6 0%, #E8DCC4 100%);">
                            <div class="text-sm mb-1" style="color: var(--maillard-dark);">ğŸš€ æœ€çŸ­æ—¶é•¿</div>
                            <div class="text-2xl font-bold" style="color: var(--maillard-accent);">-</div>
                        </div>
                        <div class="p-4 rounded-lg" style="background: linear-gradient(135deg, #B8956A 0%, #8B6F47 100%);">
                            <div class="text-sm mb-1 text-white">ğŸŒ æœ€é•¿æ—¶é•¿</div>
                            <div class="text-2xl font-bold text-white">-</div>
                        </div>
                    </div>
                </div>

                <!-- å›¾è¡¨åŒºåŸŸ -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="card-maillard rounded-xl p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center" style="color: var(--maillard-dark);">
                            <span class="text-xl mr-2">ğŸ“ˆ</span>
                            é€šå‹¤æ—¶é—´è¶‹åŠ¿
                        </h3>
                        <div id="chartTrend" style="height: 300px;"></div>
                    </div>
                    <div class="card-maillard rounded-xl p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center" style="color: var(--maillard-dark);">
                            <span class="text-xl mr-2">ğŸš—</span>
                            å‡ºè¡Œæ–¹å¼å¯¹æ¯”
                        </h3>
                        <div id="chartTransport" style="height: 300px;"></div>
                    </div>
                    <div class="card-maillard rounded-xl p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center" style="color: var(--maillard-dark);">
                            <span class="text-xl mr-2">ğŸ“…</span>
                            æ˜ŸæœŸåˆ†å¸ƒ
                        </h3>
                        <div id="chartWeekday" style="height: 300px;"></div>
                    </div>
                    <div class="card-maillard rounded-xl p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center" style="color: var(--maillard-dark);">
                            <span class="text-xl mr-2">ğŸ¥§</span>
                            åˆ†æ®µæ—¶é—´å æ¯”
                        </h3>
                        <div id="chartSegments" style="height: 300px;"></div>
                    </div>
                </div>

                <!-- æ™ºèƒ½å»ºè®® -->
                <div class="card-maillard rounded-xl p-6">
                    <h3 class="text-lg font-semibold mb-4 flex items-center" style="color: var(--maillard-dark);">
                        <span class="text-2xl mr-2">ğŸ’¡</span>
                        æ™ºèƒ½å»ºè®®
                    </h3>
                    <div id="suggestions" class="space-y-3">
                        <div class="text-center py-4" style="color: var(--maillard-accent);">
                            <div class="loading mx-auto mb-2"></div>
                            <div>åˆ†æä¸­... ğŸ¤”</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- è¯¦æƒ…å¼¹çª— -->
    <div id="detailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto" style="border: 3px solid var(--maillard-light);">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold flex items-center" style="color: var(--maillard-dark);">
                    <span class="text-2xl mr-2">ğŸ“‹</span>
                    è®°å½•è¯¦æƒ…
                </h3>
                <button id="btnCloseModal" class="hover:opacity-70 transition-opacity" style="color: var(--maillard-accent);">
                    <span class="text-2xl">âœ–ï¸</span>
                </button>
            </div>
            <div id="detailContent"></div>
            <div class="mt-6 flex justify-end space-x-2">
                <button id="btnDeleteRecord" class="px-4 py-2 text-white rounded-lg hover:opacity-90 transition-opacity" style="background: #C17767;">
                    ğŸ—‘ï¸ åˆ é™¤
                </button>
                <button id="btnCloseModal2" class="px-4 py-2 rounded-lg hover:shadow-md transition-all" style="background: var(--maillard-light); color: var(--maillard-dark);">å…³é—­</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script type="module" src="main.js"></script>
</body>
</html>